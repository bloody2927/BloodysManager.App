<Window x:Class="BloodysManager.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:BloodysManager.App.Views.Converters"
        Title="BloodysManager"
        Height="720"
        Width="1100"
        WindowStartupLocation="CenterScreen">
  <Window.Resources>
    <conv:BoolToBrushConverter x:Key="BoolToBrush"/>
    <Style x:Key="FrameBorder" TargetType="Border">
      <Setter Property="BorderBrush" Value="#444"/>
      <Setter Property="BorderThickness" Value="2"/>
      <Setter Property="CornerRadius" Value="6"/>
      <Setter Property="Padding" Value="12"/>
      <Setter Property="Margin" Value="8"/>
    </Style>
  </Window.Resources>

  <DockPanel>
    <Menu DockPanel.Dock="Top">
      <MenuItem Header="{Binding L[MenuFile]}">
        <MenuItem Header="{Binding L[MenuSetPathLive]}" Command="{Binding CmdSetPathLive}"/>
        <MenuItem Header="{Binding L[MenuSetPathCopy]}" Command="{Binding CmdSetPathCopy}"/>
        <MenuItem Header="{Binding L[MenuSetPathBackup]}" Command="{Binding CmdSetPathBackup}"/>
        <MenuItem Header="{Binding L[MenuSetPathBackupUpdate]}" Command="{Binding CmdSetPathBackupZip}"/>
        <Separator/>
        <MenuItem Header="{Binding L[MenuExit]}" Command="{Binding CmdExit}"/>
      </MenuItem>
      <MenuItem Header="{Binding L[MenuSettings]}" Command="{Binding CmdOpenSettings}"/>
      <MenuItem Header="{Binding L[MenuCredits]}" Command="{Binding CmdOpenCredits}"/>
      <MenuItem Header="{Binding L[MenuLanguage]}">
        <MenuItem Header="Deutsch" Command="{Binding CmdLangDE}"/>
        <MenuItem Header="English" Command="{Binding CmdLangEN}"/>
      </MenuItem>
    </Menu>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
      <StackPanel Margin="12">
        <Border Style="{StaticResource FrameBorder}">
          <StackPanel>
            <TextBlock Text="{Binding AppTitle}" FontFamily="Consolas" FontSize="36"
                       Foreground="#FFEE4B4B" FontWeight="Bold" HorizontalAlignment="Center"/>
            <ComboBox ItemsSource="{Binding Profiles}" SelectedItem="{Binding ActiveProfile}" DisplayMemberPath="Name"
                      Margin="0,16,0,0" Width="320" HorizontalAlignment="Center"/>
            <Button Content="{Binding BtnCreateStruct}" Command="{Binding CmdCreateFolders}"
                    Margin="0,16,0,0" Padding="10" HorizontalAlignment="Center" Width="280"/>
          </StackPanel>
        </Border>

        <Border Style="{StaticResource FrameBorder}">
          <StackPanel>
            <TextBlock Text="Pfadstatus" FontWeight="Bold" Margin="0,0,0,8"/>
            <Grid Margin="0,4,0,0">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
              </Grid.RowDefinitions>

              <TextBlock Text="Live" VerticalAlignment="Center" Margin="0,0,12,0"/>
              <Rectangle Grid.Column="0" Grid.Row="0" Width="12" Height="12" RadiusX="2" RadiusY="2" Fill="{Binding ActiveProfile.ExistsLive, Converter={StaticResource BoolToBrush}}" VerticalAlignment="Center"/>
              <TextBox Grid.Column="1" Grid.Row="0" Margin="6,0,6,6"
                       Text="{Binding ActiveProfile.LivePath, UpdateSourceTrigger=PropertyChanged}"
                       ToolTip="{Binding ActiveProfile.LivePath}">
                <TextBox.ContextMenu>
                  <ContextMenu>
                    <MenuItem Header="Explorer Ã¶ffnen"
                              Command="{Binding DataContext.CmdOpenPathInExplorer, RelativeSource={RelativeSource AncestorType=Window}}"
                              CommandParameter="{Binding Text, RelativeSource={RelativeSource AncestorType=TextBox}}"/>
                    <MenuItem Header="Ordner anlegen"
                              Command="{Binding DataContext.CmdCreatePathDir, RelativeSource={RelativeSource AncestorType=Window}}"
                              CommandParameter="{Binding Text, RelativeSource={RelativeSource AncestorType=TextBox}}"/>
                  </ContextMenu>
                </TextBox.ContextMenu>
              </TextBox>
              <StackPanel Grid.Column="2" Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center">
                <Button Content="â€¦" Width="32" Command="{Binding CmdSetPathLive}" Margin="0,0,4,0"/>
                <Button Content="ðŸ“‚" Width="32" Command="{Binding CmdOpenLiveInExplorer}" ToolTip="Explorer Ã¶ffnen"/>
                <Button Content="ï¼‹" Width="32" Command="{Binding CmdCreateLiveDir}" ToolTip="Ordner anlegen"/>
              </StackPanel>

              <TextBlock Grid.Row="1" Text="Copy" VerticalAlignment="Center" Margin="0,0,12,0"/>
              <Rectangle Grid.Column="0" Grid.Row="1" Width="12" Height="12" RadiusX="2" RadiusY="2" Fill="{Binding ActiveProfile.ExistsCopy, Converter={StaticResource BoolToBrush}}" VerticalAlignment="Center"/>
              <TextBox Grid.Column="1" Grid.Row="1" Margin="6,0,6,6"
                       Text="{Binding ActiveProfile.CopyPath, UpdateSourceTrigger=PropertyChanged}"
                       ToolTip="{Binding ActiveProfile.CopyPath}">
                <TextBox.ContextMenu>
                  <ContextMenu>
                    <MenuItem Header="Explorer Ã¶ffnen"
                              Command="{Binding DataContext.CmdOpenPathInExplorer, RelativeSource={RelativeSource AncestorType=Window}}"
                              CommandParameter="{Binding Text, RelativeSource={RelativeSource AncestorType=TextBox}}"/>
                    <MenuItem Header="Ordner anlegen"
                              Command="{Binding DataContext.CmdCreatePathDir, RelativeSource={RelativeSource AncestorType=Window}}"
                              CommandParameter="{Binding Text, RelativeSource={RelativeSource AncestorType=TextBox}}"/>
                  </ContextMenu>
                </TextBox.ContextMenu>
              </TextBox>
              <StackPanel Grid.Column="2" Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Center">
                <Button Content="â€¦" Width="32" Command="{Binding CmdSetPathCopy}" Margin="0,0,4,0"/>
                <Button Content="ðŸ“‚" Width="32" Command="{Binding CmdOpenCopyInExplorer}" ToolTip="Explorer Ã¶ffnen"/>
                <Button Content="ï¼‹" Width="32" Command="{Binding CmdCreateCopyDir}" ToolTip="Ordner anlegen"/>
              </StackPanel>

              <TextBlock Grid.Row="2" Text="Backup" VerticalAlignment="Center" Margin="0,0,12,0"/>
              <Rectangle Grid.Column="0" Grid.Row="2" Width="12" Height="12" RadiusX="2" RadiusY="2" Fill="{Binding ActiveProfile.ExistsBackup, Converter={StaticResource BoolToBrush}}" VerticalAlignment="Center"/>
              <TextBox Grid.Column="1" Grid.Row="2" Margin="6,0,6,6"
                       Text="{Binding ActiveProfile.BackupRoot, UpdateSourceTrigger=PropertyChanged}"
                       ToolTip="{Binding ActiveProfile.BackupRoot}">
                <TextBox.ContextMenu>
                  <ContextMenu>
                    <MenuItem Header="Explorer Ã¶ffnen"
                              Command="{Binding DataContext.CmdOpenPathInExplorer, RelativeSource={RelativeSource AncestorType=Window}}"
                              CommandParameter="{Binding Text, RelativeSource={RelativeSource AncestorType=TextBox}}"/>
                    <MenuItem Header="Ordner anlegen"
                              Command="{Binding DataContext.CmdCreatePathDir, RelativeSource={RelativeSource AncestorType=Window}}"
                              CommandParameter="{Binding Text, RelativeSource={RelativeSource AncestorType=TextBox}}"/>
                  </ContextMenu>
                </TextBox.ContextMenu>
              </TextBox>
              <StackPanel Grid.Column="2" Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center">
                <Button Content="â€¦" Width="32" Command="{Binding CmdSetPathBackup}" Margin="0,0,4,0"/>
                <Button Content="ðŸ“‚" Width="32" Command="{Binding CmdOpenBackupInExplorer}" ToolTip="Explorer Ã¶ffnen"/>
                <Button Content="ï¼‹" Width="32" Command="{Binding CmdCreateBackupDir}" ToolTip="Ordner anlegen"/>
              </StackPanel>

              <TextBlock Grid.Row="3" Text="Backup ZIP" VerticalAlignment="Center" Margin="0,0,12,0"/>
              <Rectangle Grid.Column="0" Grid.Row="3" Width="12" Height="12" RadiusX="2" RadiusY="2" Fill="{Binding ActiveProfile.ExistsBackupZip, Converter={StaticResource BoolToBrush}}" VerticalAlignment="Center"/>
              <TextBox Grid.Column="1" Grid.Row="3" Margin="6,0,6,0"
                       Text="{Binding ActiveProfile.BackupZipRoot, UpdateSourceTrigger=PropertyChanged}"
                       ToolTip="{Binding ActiveProfile.BackupZipRoot}">
                <TextBox.ContextMenu>
                  <ContextMenu>
                    <MenuItem Header="Explorer Ã¶ffnen"
                              Command="{Binding DataContext.CmdOpenPathInExplorer, RelativeSource={RelativeSource AncestorType=Window}}"
                              CommandParameter="{Binding Text, RelativeSource={RelativeSource AncestorType=TextBox}}"/>
                    <MenuItem Header="Ordner anlegen"
                              Command="{Binding DataContext.CmdCreatePathDir, RelativeSource={RelativeSource AncestorType=Window}}"
                              CommandParameter="{Binding Text, RelativeSource={RelativeSource AncestorType=TextBox}}"/>
                  </ContextMenu>
                </TextBox.ContextMenu>
              </TextBox>
              <StackPanel Grid.Column="2" Grid.Row="3" Orientation="Horizontal" VerticalAlignment="Center">
                <Button Content="â€¦" Width="32" Command="{Binding CmdSetPathBackupZip}" Margin="0,0,4,0"/>
              </StackPanel>
            </Grid>
          </StackPanel>
        </Border>

        <Border Style="{StaticResource FrameBorder}">
          <StackPanel>
            <TextBlock Text="Aktionen" FontWeight="Bold" Margin="0,0,0,8"/>
            <UniformGrid Rows="2" Columns="4" Margin="0,4,0,0">
              <Button Content="{Binding BtnClean}" Background="#FFE3B341" Command="{Binding CmdCleanDownload}"/>
              <Button Content="{Binding BtnUpdate}" Background="#FFE3B341" Command="{Binding CmdUpdate}"/>
              <Button Content="{Binding BtnCopy}" Background="#FF58A55C" Command="{Binding CmdCopy}"/>
              <Button Content="{Binding BtnCurrent}" Background="#FFE3B341" Command="{Binding CmdCurrent}"/>
              <Button Content="{Binding BtnDeleteLive}" Background="#FFD9534F" Command="{Binding CmdDeleteLive}"/>
              <Button Content="{Binding BtnDeleteCopy}" Background="#FFD9534F" Command="{Binding CmdDeleteCopy}"/>
              <Button Content="{Binding BtnRotate}" Background="#FFE3B341" Command="{Binding CmdRotate}"/>
              <Button Content="{Binding BtnExit}" Background="#FFB0B0B0" Command="{Binding CmdExit}"/>
            </UniformGrid>
            <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
              <Button Content="Alle: Update" Padding="12,6" Margin="0,0,6,0" Command="{Binding CmdAllUpdate}"/>
              <Button Content="Alle: Copy" Padding="12,6" Margin="0,0,6,0" Command="{Binding CmdAllCopy}"/>
              <Button Content="Alle: Rotate" Padding="12,6" Command="{Binding CmdAllRotate}"/>
            </StackPanel>
          </StackPanel>
        </Border>

        <Grid Margin="8,12,8,8">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>

          <GroupBox Header="worldserver.exe" Grid.Row="0" Grid.Column="0" Margin="0,0,8,8">
            <Grid Margin="8">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Text="Pfad:" VerticalAlignment="Center" Margin="0,0,6,0"/>
              <TextBox Grid.Column="1" Text="{Binding ActiveProfile.WorldExePath}" ToolTip="Leer = <Live>\\bin\\worldserver.exe" Margin="0,0,6,0"/>
              <StackPanel Grid.Column="2" Orientation="Horizontal">
                <Button Content="â€¦" Width="32" Command="{Binding CmdBrowseWorldExe}" ToolTip="EXE wÃ¤hlen"/>
                <Button Content="Start" Margin="6,0,0,0" Padding="12,4" Command="{Binding CmdStartWorld}"
                        IsEnabled="{Binding IsWorldRunning, Converter={StaticResource InverseBool}}"/>
                <Button Content="Stop" Margin="6,0,0,0" Padding="12,4" Command="{Binding CmdStopWorld}"/>
              </StackPanel>
              <TextBlock Grid.ColumnSpan="3" Margin="0,8,0,0">
                <Run Text="Status: "/>
                <Run Text="{Binding IsWorldRunning}"/>
              </TextBlock>
            </Grid>
          </GroupBox>

          <GroupBox Header="authserver.exe" Grid.Row="0" Grid.Column="1" Margin="8,0,0,8">
            <Grid Margin="8">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBlock Text="Pfad:" VerticalAlignment="Center" Margin="0,0,6,0"/>
              <TextBox Grid.Column="1" Text="{Binding ActiveProfile.AuthExePath}" ToolTip="Leer = <Live>\\bin\\authserver.exe" Margin="0,0,6,0"/>
              <StackPanel Grid.Column="2" Orientation="Horizontal">
                <Button Content="â€¦" Width="32" Command="{Binding CmdBrowseAuthExe}" ToolTip="EXE wÃ¤hlen"/>
                <Button Content="Start" Margin="6,0,0,0" Padding="12,4" Command="{Binding CmdStartAuth}"
                        IsEnabled="{Binding IsAuthRunning, Converter={StaticResource InverseBool}}"/>
                <Button Content="Stop" Margin="6,0,0,0" Padding="12,4" Command="{Binding CmdStopAuth}"/>
              </StackPanel>
              <TextBlock Grid.ColumnSpan="3" Margin="0,8,0,0">
                <Run Text="Status: "/>
                <Run Text="{Binding IsAuthRunning}"/>
              </TextBlock>
            </Grid>
          </GroupBox>

          <GroupBox Header="Ausgabe &amp; Log" Grid.Row="1" Grid.ColumnSpan="2" Margin="0,0,0,8">
            <DockPanel Margin="6" LastChildFill="True">
              <Button DockPanel.Dock="Right" Content="Leeren" Padding="12,4" Command="{Binding CmdClearLog}" Margin="8,0,0,0"/>
              <TextBlock VerticalAlignment="Center" Text="Live-Log:"/>
            </DockPanel>
          </GroupBox>

          <Border Grid.Row="2" Grid.RowSpan="2" Grid.ColumnSpan="2" BorderBrush="#444" BorderThickness="1">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
              <TextBox Text="{Binding Log}" IsReadOnly="True" TextWrapping="Wrap" FontFamily="Consolas" FontSize="12" AcceptsReturn="True"/>
            </ScrollViewer>
          </Border>
        </Grid>
      </StackPanel>
    </ScrollViewer>
  </DockPanel>
</Window>
